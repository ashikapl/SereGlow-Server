<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payments</title>
    <link rel="stylesheet" href="../static/css/main.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    <nav id="sidebar" class="active">
      <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="toggleBtn">
          <i class="fa fa-bars"></i>
          <span class="sr-only">Toggle Menu</span>
        </button>
      </div>
      <div class="p-3">
        <h2>
          <a href="/user" class="logo"
            >Dashboard <span>Welcome, {{user_name}}!</span>
          </a>
        </h2>
        <ul class="list-unstyled components mb-5">
          <li>
            <a href="{{ url_for('user_bp.show_user_dashboard') }}"
              ><i class="fas fa-chart-bar mr-3"></i> Overview</a
            >
          </li>
          <li>
            <a href="{{ url_for('user_bp.show_services') }}"
              ><i class="fas fa-list"></i> View Services</a
            >
          </li>
          <li>
            <a href="{{ url_for('appointment_bp.show_bookAppointment') }}"
              ><i class="fas fa-calendar-plus"></i> Book Appointment</a
            >
          </li>
          <li>
            <a href="{{ url_for('appointment_bp.show_myAppointment') }}"
              ><i class="fas fa-calendar"></i> My Appointments</a
            >
          </li>
          <li class="active">
            <a href="{{ url_for('appointment_bp.show_myAppointment') }}"
              ><i class="fas fa-wallet mr-3"></i> Payments</a
            >
          </li>
          <li>
            <a href="{{ url_for('user_bp.show_user_profile') }}"
              ><i class="fas fa-user"></i> Profile</a
            >
          </li>
          <li>
            <a href="{{ url_for('user_bp.user_logout') }}"
              ><i class="fas fa-sign-out mr-3"></i> Logout</a
            >
          </li>
        </ul>
      </div>
    </nav>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal" style="display: block">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Payment</h2>
          <span class="close" onclick="closeModal('paymentModal')"
            >&times;</span
          >
        </div>
        <div id="paymentContent">
          <div class="payment-summary">
            <h3>Booking Summary</h3>
            <div id="paymentSummary"></div>
          </div>
          <form id="paymentForm">
            <div class="form-group">
              <label>Card Number</label>
              <input
                type="text"
                id="cardNumber"
                placeholder="1234 5678 9012 3456"
                maxlength="19"
              />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Expiry Date</label>
                <input
                  type="text"
                  id="expiryDate"
                  placeholder="MM/YY"
                  maxlength="5"
                />
              </div>
              <div class="form-group">
                <label>CVV</label>
                <input type="text" id="cvv" placeholder="123" maxlength="3" />
              </div>
            </div>
            <div class="form-group">
              <label>Cardholder Name</label>
              <input type="text" id="cardholderName" required />
            </div>
            <button type="submit" class="btn btn-primary full-width">
              Pay Now
            </button>
          </form>
        </div>
      </div>
    </div>
    <script>
      // Listen for logout in other tabs
      window.addEventListener("storage", function (event) {
        if (event.key === "logout") {
          window.location.href = "/user/login"; // redirect to login
        }
      });

      function logout() {
        localStorage.setItem("logout", Date.now());
      }

      // Login Notification
      // Auto remove after 5 seconds (5000 ms)
      const notif = document.getElementById("loginNotification");
      setTimeout(() => {
        if (notif) {
          notif.style.opacity = "0";
          notif.style.transform = "translateX(100%)";
          notif.style.transition = "all 0.5s ease";
        }
      }, 2000);
      setTimeout(() => {
        if (notif) {
          notif.remove();
        }
      }, 4000);
    </script>
    <script>
      document
        .getElementById("sidebarCollapse")
        .addEventListener("click", function () {
          document.getElementById("sidebar").classList.toggle("active");
        });
    </script>
  </body>
</html>
